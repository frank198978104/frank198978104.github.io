---
layout: post
title:  "淺談正則表達式中的分組和引用"
date:   2016-05-06 11:40:18 +0800
categories: JavaScript
tags: 正則 分組 Regular
---

* content
{:toc}

由正則表達式如何匹配相同字符出發，講講正則表達式中的選擇、分組和引用。

## 問題

在外刊君讀者群中看到有人提出這樣的一個需求：

> 把字符串切成連續相同字符的正則怎麼寫？比如`abbcccdddd`切成`a,bb,ccc,dddd`

之前我對正則表達式也是略有研究，想嘗試一下。其實我對正則表達式的學習基本完全來源於犀牛書的第10章，真正看懂這一章，我覺得操作正則表達式應該不在話下。





## 我的答案

先給出我的答案吧：

```js
'abbccddd'.match(/(\w)\1*/g) // ["a", "bb", "cc", "ddd"]
```

## 說明


拿到這個問題，首先要匹配字符`[a-zA-Z0-9]`，這裡直接使用`\w`。然後是全局匹配，在最後加上`g`。難點在於怎麼判斷重複。

翻看了犀牛書後，又讀了一遍分組和引用的部分。使用小括號`()`將字符作為一個最小單元，同時小括號還能記憶這個組合相匹配的字符串。再使用反斜槓`\`引用前面分組的表達式，數字1表示第一個小括號。這時完成了2個字符重複的要求。最後再使用`*`來匹配出現0次或n次。這個正則表達式就寫完了。

下面詳細說說分組和引用。

**正則表達式的選擇、分組和引用字符表**

字符 | 含義
--- | ---
`|` | 選擇，匹配的是該符號左邊的子表達式或右邊的子表達式
`(...)` | 組合，將幾個項組合為一個單元，這個單元可通過`*` `+` `?` `|` 等符號加以修飾，**而且可以記住和這個組合相匹配的字符串以提供伺候的引用使用**
`(?:...)` | 只組合，把項組合到一個段元，但不記憶與該組相匹配的字符
`\n` | 和第n個分組第一次匹配的字符相匹配，組是圓括號中的子表達式（也有可能是嵌套的），組索引是從左到右的左括號數，`(?:`形式的分組不編碼
